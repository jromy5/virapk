**请先更新至最新版本，多数问题已修复。**

## The directory of host application doesn't exist!
```
PluginDemo renyugang$ gradle clean assemblePlugin
Incremental java compilation is an incubating feature.

FAILURE: Build failed with an exception.

* What went wrong:
A problem occurred configuring project ':app'.
> The directory of host application doesn't exist!

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED
```
错误分析：宿主工程的application模块的路径不存在，一般是指路径配错了

解决方式：
```
virtualApk {
    packageId = 0x6f
    targetHost = '../../VirtualAPK/app' // 检测这个路径是否正确，相对路径或者绝对路径都行
    applyHostMapping = true
}
```
## java.lang.ArrayIndexOutOfBoundsException: 2
```
PluginDemo renyugang$ gradle clean assemblePlugin
Caused by: java.lang.ArrayIndexOutOfBoundsException: 2
at com.didi.virtualapk.VAPlugin$_pickSplitEntries_closure8.doCall(VAPlug
in.groovy:188)
at com.didi.virtualapk.VAPlugin.pickSplitEntries(VAPlugin.groovy:186)
at com.didi.virtualapk.VAPlugin$_apply_closure1$_closure16.doCall(VAPlug
in.groovy:66)
at com.didi.virtualapk.VAPlugin$_apply_closure1.doCall(VAPlugin.groovy:5
2)
at org.gradle.listener.ClosureBackedMethodInvocationDispatch.dispatch(Cl
osureBackedMethodInvocationDispatch.java:40)
at org.gradle.listener.ClosureBackedMethodInvocationDispatch.dispatch(Cl
osureBackedMethodInvocationDispatch.java:25)

BUILD FAILED
```
错误分析：请检查dependencies中aar的依赖方式

解决方式：
按如下建议修改
```
dependencies {
    √ compile 'com.didi.virtualapk:core:0.9.0'
    √ compile project (":CoreLibrary")

    // group和version字段必须有
    √ compile(group:'test', name:'CoreLibrary-release', version:'0.1', ext:'aar')

    × releaseCompile 'com.didi.virtualapk:core:0.9.0'
    × compile(name:'CoreLibrary-release', ext:'aar')
}
```
## 编译插件时空指针
```
ResourceMerger### don't have any retained resources
:app:processShanghaiReleaseResources FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:processShanghaiReleaseResources'.
> Cannot invoke method getAt() on null object
```

解决方式：请确保插件中至少有一个自己的资源

## 插件的activity能正常打开，但是插件中的资源读取失败

解决方式：先检查 packageId 的取值范围(在下面)是否正确，再检查读取失败的资源id是否和宿主的资源重名，重名资源会在构建插件包时被自动剔除。

## Failed to notify project evaluation listener
```
* What went wrong:
A problem occurred configuring project ':app'.
> Failed to notify project evaluation listener.
   > com/android/builder/dependency/ManifestDependency
```
解决方式：修改Gradle和build tools的版本
```
构建环境建议：
Gradle                   2.14.1
com.android.tools.build  2.1.3
```
## java.lang.IllegalStateException: You need to use a Theme.AppCompat theme (or descendant) with this activity

解决方式：构建插件请使用```gradle assemblePlugin```，而不能直接通过AndroidStudio run出来一个插件apk。

## 关于Android M及以上版本SD卡的访问权限问题
从Android 6.0开始，系统采用了新的权限机制，为了保证插件的加载，请保证APP具有SD卡的访问权限。如果你的app没有在android 6.0上做足够的测试，请不要设置targetSdk为23。

## 关于Android M及以上版本动态申请权限问题
从Android 6.0开始，系统采用了新的权限机制，但是暂时不支持在插件中动态申请权限。

## 插件的gradle文件中对于packageID设置有什么范围吗？
- 采用正常的android资源命名方式，PPTTNNNN：PackageId + TypeId + EntryId。
- 运行时获取资源需要通过packageId来映射apk中的资源文件，不同apk的packageId值不能相同，所以插件的packageId范围是介于系统应用(0x01,0x02,...具体占用多少值视系统而定)和宿主(0x7F)之间。
- 多个插件的packageId和packageName一样，在宿主中需要确保是唯一的。

## 生成的插件apk中会发现有些png图片是黑色的，大小为0，这是怎么回事？
为了减小包的大小对于那些没有引用的资源进行压缩了，在gradle中配置shrinkResources true即可，位置和minifyEnabled true一起。

## 关于Activity的configchanges
因为configChanges的选项组合太多，坑位比较多，这个暂时不准备支持 因为在日常使用的时候就横竖常用。

## iR是什么意思？
install Release ，gradle中的一种小驼峰命名的缩写方式。如果发现冲突，可以通过assembleRelease来实现构建宿主工程。

## 0.9.1版本的VirtualAPK构建插件在构建插件的时候assets目录下的文件会被删除
这是0.9.1版本的bug，会尽快修复。